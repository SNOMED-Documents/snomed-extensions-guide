# Modify Relationship in an Extension

## Purpose

There are a number of reasons for modifying a relationship in an extension, including:

* Changing the status of the relationship from active to inactive, or from inactive to active
* Changing the relationship group of a specific relationship
* Changing the characteristic type of a relationship

## Principles

Relationships that are used to define extension concepts can be modified. However, please note that only the values of mutable attributes may be modified. As indicated in the table below, the six mutable attributes of a relationship are: _effectiveTime, active, moduleId, relationshipGroup, characteristicTypeId,_ and _modifierId_. When a change is required to the source, destination or type of the relationship, the relationship must be inactivated and a new relationship created with the required values.

All modifications to a SNOMED CT relationship should also conform to the SNOMED CT concept model rules, including relationship group cardinality constraints. For more information please refer to the [Editorial Guide](http://snomed.org/eg) and the [Machine Readable Concept Model](http://smomed.org/mrcm).

Relationships authored by SNOMED International, which define concepts in the International Edition, should not be modified. If an error is detected in the International Edition, which requires one or more relationships to be modified, the issue should be documented and reported to SNOMED International using the [Content Request Service](https://confluence.ihtsdotools.org/display/SCTCR/SNOMED+CT+Content+Request+Service). In situations in which an extension producer needs to modify a relationship to temporarily fix an issue, this should be done in a module owned by the extension producer, and reported to SNOMED International It is recommended that extension producers try to avoid modifying international relationships, as such modifications may affect the results of subsumption testing and therefore may have an impact on cross-edition interoperability.

**Table: Mutability of relationship attributes**

<table><thead><tr><th valign="top">Field</th><th valign="top">Data type</th><th valign="top">Purpose</th><th valign="top">Mutable</th><th valign="top">Part of Primary Key</th></tr></thead><tbody><tr><td valign="top">id</td><td valign="top">SCTID</td><td valign="top">Uniquely identifies the relationship.</td><td valign="top">NO</td><td valign="top">YES (Full/ Snapshot)</td></tr><tr><td valign="top">effectiveTime</td><td valign="top">Time</td><td valign="top"><p>Specifies the inclusive date at which the component version's state became the then current valid state of the component.</p><p></p><p><strong>Note</strong> : In distribution files the effectiveTime should follow the short ISO date format (<em>YYYYMM DD</em>) and should not include the hours, minutes, seconds or timezone indicator.</p></td><td valign="top">YES</td><td valign="top">YES (Full)Optional (Snapshot)</td></tr><tr><td valign="top">active</td><td valign="top">Boolean</td><td valign="top">Specifies whether the state of the relationship was active or inactive from the nominal release date specified by the effectiveTime field.</td><td valign="top">YES</td><td valign="top">NO</td></tr><tr><td valign="top">moduleId</td><td valign="top">SCTID</td><td valign="top">Identifies the relationship version's module. Set to a <a href="https://confluence.ihtsdotools.org/display/DOCGLOSS/child">child</a> of <a href="http://snomed.info/id/900000000000443000">900000000000443000 | Module|</a> within the metadata hierarchy.</td><td valign="top">YES</td><td valign="top">NO</td></tr><tr><td valign="top">sourceId</td><td valign="top">SCTID</td><td valign="top">Identifies the source concept of the relationship version. That is the concept defined by this relationship. Set to the identifier of a concept.</td><td valign="top">NO</td><td valign="top">NO</td></tr><tr><td valign="top">destinationId</td><td valign="top">SCTID</td><td valign="top">Identifies the concept that is the destination of the relationship version.That is the concept representing the value of the attribute represented by the typeId column.Set to the identifier of a concept.Note that the values that can be applied to particular attributes are formally defined by the <a href="https://confluence.ihtsdotools.org/display/DOCMRCM/SNOMED+CT+Machine+Readable+Concept+Model">SNOMED CT Machine Readable Concept Model</a>.</td><td valign="top">NO</td><td valign="top">NO</td></tr><tr><td valign="top">relationshipGroup</td><td valign="top">Integer</td><td valign="top">Groups together relationship versions that are part of a logically associated relationshipGroup. All activeRelationship records with the same relationshipGroup number and sourceId are grouped in this way.</td><td valign="top">YES</td><td valign="top">NO</td></tr><tr><td valign="top">typeId</td><td valign="top">SCTID</td><td valign="top"><p>Identifies the concept that represent the defining attribute (or relationship type) represented by this relationship version.</p><p>That is the concept representing the value of the attribute represented by the typeId column.</p><p>Set to the identifier of a concept. The concept identified must be either <a href="http://snomed.info/id/116680003">116680003 | Is a|</a> or a subtype of <a href="http://snomed.info/id/410662002">410662002 | Concept model attribute|</a> . The concepts that can be used as in the typeId column are formally defined as follows:  <a href="http://snomed.info/id/116680003">116680003 |is a|</a>  OR &#x3C; <a href="http://snomed.info/id/410662002">410662002 |concept model attribute|</a>.  Note that the attributes that can be applied to particular concepts are formally defined by the <a href="https://confluence.ihtsdotools.org/display/DOCMRCM/SNOMED+CT+Machine+Readable+Concept+Model">SNOMED CT Machine Readable Concept Model</a>.</p></td><td valign="top">NO</td><td valign="top">NO</td></tr><tr><td valign="top">characteristicTypeId</td><td valign="top">SCTID</td><td valign="top">A concept enumeration value that identifies the characteristic type of the relationship version (i.e. whether the relationship version is defining, qualifying, etc.) This field is set to a descendant of <a href="http://snomed.info/id/900000000000449001">900000000000449001 | Characteristic type|</a> in the metadata hierarchy.</td><td valign="top">YES</td><td valign="top">NO</td></tr><tr><td valign="top">modifierId</td><td valign="top">SCTID</td><td valign="top">A concept enumeration value that identifies the type of Description Logic (DL) restriction (some, all, etc.). Set to a child of <a href="http://snomed.info/id/900000000000450001">900000000000450001 | Modifier|</a> in the metadata hierarchy.   Currently the only value used in this column is <a href="http://snomed.info/id/900000000000451002">900000000000451002 | Some|</a> and thus in practical terms this column can be ignored. For further clarification please see <a href="/broken/spaces/irKbJsZG57nSWZA4GT0M/pages/wE6k2TBygSU8vpcAIsf5">Notes on modifierId</a>.</td><td valign="top">YES</td><td valign="top">NO</td></tr></tbody></table>

## Process

The table below provides a summary of the process to follow when modifying a relationship in an extension.

<table><thead><tr><th width="241.15625" valign="top">File Type</th><th valign="top">Process</th></tr></thead><tbody><tr><td valign="top"><strong>Stated Axiom</strong></td><td valign="top"><p>Modifying a concept definition involves updating the defining properties of the concept, i.e. making changes to the axioms that represent necessary conditions for the meaning of the concept. </p><p>Once the update has been performed, the concept is classified together with the SNOMED CT content it belongs to, and a new set of relationships are inferred.</p></td></tr><tr><td valign="top"></td><td valign="top">To prepare for publication, a new row representing the updated concept definition is added to the <a href="https://app.gitbook.com/s/irKbJsZG57nSWZA4GT0M/reference-set-release-file-specification/5.2-reference-set-types/5.2.1-content-reference-sets/5.2.1.9-owl-expression-reference-set">OWL axiom reference set</a>.</td></tr><tr><td valign="top"></td><td valign="top"><p></p><p>The attributes of the reference set member representing the stated axiom are set as follows:</p><ul><li><em>id</em> is set to the UUID of the reference set member representing the definition of the concept being updated.</li><li><em>effectiveTime</em> is set to the date the extension will be published</li><li><em>active</em> is set to '1' to indicate that the new relationship will be active at the time of publication</li><li><em>moduleId</em> is set to identify a module concept from the extension</li><li><em>referencedComponentId</em>  is set to the identifier of the concept being updated </li><li><em>owlExpression</em> is set to the text of the OWL expression representing the updated defining properties of the new concept</li></ul></td></tr><tr><td valign="top"><strong>Relationship</strong></td><td valign="top"><p></p><p>Depending on the nature of the change made, updates to the inferred relationship file will be made to reflect the changes.<br>This may involve:</p><ul><li><p>Inactivating relationships that are no longer valid for the concept</p><ul><li>see <a href="../5.4.2 authoring-concepts/5.4.2.3-inactivate-concept-in-an-extension.md">Inactivate Concept in an Extension</a></li></ul></li><li><p>Adding new relationships that represent new defining relationships</p><ul><li>see <a href="5.4.4.1-add-relationship-in-an-extension.md">Add Relationship in an Extension</a></li></ul></li><li><p>Updating existing relationships, when the change made only impacts mutable attributes for existing relationships, see above</p><ul><li>in this case, a new row which represents a new version of the modified relationship is added to the relationship file.</li></ul></li></ul></td></tr><tr><td valign="top"></td><td valign="top"><p></p><p>The attributes of the new version of the relationship are set as follows:</p><ul><li><em>id</em> is set to the relationshipId of the relationship being modified</li><li><em>effectiveTime</em> is set to the date the extension will be published</li><li><em>active</em> is set to '1' to indicate that the new version of the relationship will be active at the time of publication</li><li><em>moduleId</em> is set to identify a module concept from the extension</li><li><em>sourceId</em> is set to the same as the original version of the relationship</li><li><em>destinationId</em> is set to the same as the original version of the relationship</li><li><em>relationshipGroup</em> is set to the updated relationship group number (or the original number if no update is required)</li><li><em>typeId</em> is set to the same as the original version of the relationship</li><li><em>characteristicTypeId</em> is set to the updated value (or the original value if no update is required)</li><li><em>modifierId</em> is set to the updated value (or the original value if no update is required)</li></ul></td></tr></tbody></table>



<a href="https://docs.google.com/forms/d/e/1FAIpQLScTmbZIf0UEQwYDkY27EEWBkaiYkHSbR0_9DmFrMLXoQLyL7Q/viewform?usp=pp_url&#x26;entry.1767247133=Extension+Guide&#x26;entry.670899847=5.4.4.2%20Modify%20Relationship%20in%20an%20Extension" class="button primary">Provide Feedback</a>
