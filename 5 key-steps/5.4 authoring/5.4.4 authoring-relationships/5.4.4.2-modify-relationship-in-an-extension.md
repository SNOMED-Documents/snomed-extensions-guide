# 5.4.4.2 Modify Relationship in an Extension

# Purpose

There are a number of reasons for modifying a relationship in an extension, including: 

  * Changing the status of the relationship from active to inactive, or from inactive to active
  * Changing the relationship group of a specific relationship
  * Changing the characteristic type of a relationship

# Principles

Relationships that are used to define extension concepts can be modified. However, please note that only the values of mutable attributes may be modified. As indicated in [Table 5.4.4.2-1](https://confluence.ihtsdotools.org/display/DOCEXTPG/5.4.4.2+Modify+Relationship+in+an+Extension#Table-mutability-of-relationship-attributes "Mutability of relationship attributes"), the six mutable attributes of a relationship are:  _effectiveTime, active, moduleId, relationshipGroup, characteristicTypeId,_ and _modifierId_. When a change is required to the source, destination or type of the relationship, the relationship must be inactivated and a new relationship created with the required values.

All modifications to a SNOMED CT relationship should also conform to the SNOMED CT concept model rules, including relationship group cardinality constraints. For more information please refer to the [Editorial Guide](http://snomed.org/eg) and the [Machine Readable Concept Model](http://smomed.org/mrcm).

Relationships authored by SNOMED International, which define concepts in the International Edition, should not be modified. If an error is detected in the International Edition, which requires one or more relationships to be modified, the issue should be documented and reported to SNOMED International using the [Content Request Service](https://confluence.ihtsdotools.org/display/SCTCR/SNOMED+CT+Content+Request+Service). In situations in which an extension producer needs to modify a relationship to temporarily fix an issue, this should be done in a module owned by the extension producer, and reported to SNOMED International It is recommended that extension producers try to avoid modifying international relationships, as such modifications may affect the results of subsumption testing and therefore may have an impact on cross-edition interoperability. 

Table 5.4.4.2-1: Mutability of relationship attributes

**Field**| **Data type**| **Purpose**| **[Mutable](https://confluence.ihtsdotools.org/display/DOCGLOSS/Mutable "Glossary link: Mutable")**| **Part of Primary Key**  
---|---|---|---|---  
id| [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\) "Reference term: SCTID \(data type\)")| Uniquely identifies the [relationship](https://confluence.ihtsdotools.org/display/DOCGLOSS/relationship "Glossary link: relationship").| NO| YES (Full/ Snapshot)   
[effectiveTime](https://confluence.ihtsdotools.org/display/DOCRELFMT/effectiveTime+\(field\) "Reference term: effectiveTime \(field\)")| [Time](https://confluence.ihtsdotools.org/display/DOCRELFMT/Time+\(data+type\) "Reference term: Time \(data type\)")| Specifies the inclusive date at which the component version's state became the then current valid state of the component.**Note** : In distribution files the effectiveTime should follow the short ISO date format (_YYYYMM _DD__) and should not include the hours, minutes, seconds or timezone indicator.| YES| YES (Full)Optional (Snapshot)   
[active](https://confluence.ihtsdotools.org/display/DOCRELFMT/active+\(field\) "Reference term: active \(field\)")| [Boolean](https://confluence.ihtsdotools.org/display/DOCRELFMT/Boolean+\(data+type\) "Reference term: Boolean \(data type\)")| Specifies whether the state of the [relationship](https://confluence.ihtsdotools.org/display/DOCGLOSS/relationship "Glossary link: relationship") was [active](https://confluence.ihtsdotools.org/display/DOCGLOSS/active "Glossary link: active") or [inactive](https://confluence.ihtsdotools.org/display/DOCGLOSS/inactive "Glossary link: inactive") from the nominal release date specified by the [effectiveTime](https://confluence.ihtsdotools.org/display/DOCRELFMT/effectiveTime+\(field\) "Reference term: effectiveTime \(field\)") field.| YES| NO  
[moduleId](https://confluence.ihtsdotools.org/display/DOCRELFMT/moduleId+\(field\) "Reference term: moduleId \(field\)")| [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\) "Reference term: SCTID \(data type\)")| Identifies the [relationship](https://confluence.ihtsdotools.org/display/DOCGLOSS/relationship "Glossary link: relationship") version's module. Set to a [child](https://confluence.ihtsdotools.org/display/DOCGLOSS/child "Glossary link: child") of [ 900000000000443000 | Module|](http://snomed.info/id/900000000000443000 "900000000000443000 | Module |") within the metadata [hierarchy](https://confluence.ihtsdotools.org/display/DOCGLOSS/hierarchy "Glossary link: hierarchy").| YES| NO  
[sourceId](https://confluence.ihtsdotools.org/display/DOCRELFMT/sourceId+\(field\) "Reference term: sourceId \(field\)")| [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\) "Reference term: SCTID \(data type\)")| Identifies the source [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept "Glossary link: concept") of the [relationship](https://confluence.ihtsdotools.org/display/DOCGLOSS/relationship "Glossary link: relationship") version. That is the [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept "Glossary link: concept") defined by this [relationship](https://confluence.ihtsdotools.org/display/DOCGLOSS/relationship "Glossary link: relationship"). Set to the [identifier](https://confluence.ihtsdotools.org/display/DOCGLOSS/identifier "Glossary link: identifier") of a [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept "Glossary link: concept").| NO| NO  
[destinationId](https://confluence.ihtsdotools.org/display/DOCRELFMT/destinationId+\(field\) "Reference term: destinationId \(field\)")| [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\) "Reference term: SCTID \(data type\)")| Identifies the [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept "Glossary link: concept") that is the destination of the [relationship](https://confluence.ihtsdotools.org/display/DOCGLOSS/relationship "Glossary link: relationship") version.That is the [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept "Glossary link: concept") representing the value of the attribute represented by the [typeId](https://confluence.ihtsdotools.org/display/DOCRELFMT/typeId+\(field\) "Reference term: typeId \(field\)") column.Set to the [identifier](https://confluence.ihtsdotools.org/display/DOCGLOSS/identifier "Glossary link: identifier") of a [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept "Glossary link: concept").Note that the values that can be applied to particular attributes are formally defined by the [SNOMED CT Machine Readable Concept Model](https://confluence.ihtsdotools.org/display/DOCMRCM/SNOMED+CT+Machine+Readable+Concept+Model).| NO| NO  
[relationshipGroup](https://confluence.ihtsdotools.org/display/DOCRELFMT/relationshipGroup+\(field\) "Reference term: relationshipGroup \(field\)")| [Integer](https://confluence.ihtsdotools.org/display/WIPRELFMT/Integer+\(data+type\))| Groups together [relationship](https://confluence.ihtsdotools.org/display/DOCGLOSS/relationship "Glossary link: relationship") versions that are part of a logically associated [relationshipGroup](https://confluence.ihtsdotools.org/display/DOCRELFMT/relationshipGroup+\(field\) "Reference term: relationshipGroup \(field\)"). All [active](https://confluence.ihtsdotools.org/display/DOCGLOSS/active "Glossary link: active")[Relationship](https://confluence.ihtsdotools.org/display/DOCGLOSS/Relationship "Glossary link: Relationship") records with the same [relationshipGroup](https://confluence.ihtsdotools.org/display/DOCRELFMT/relationshipGroup+\(field\) "Reference term: relationshipGroup \(field\)") number and [sourceId](https://confluence.ihtsdotools.org/display/DOCRELFMT/sourceId+\(field\) "Reference term: sourceId \(field\)") are grouped in this way.| YES| NO  
[typeId](https://confluence.ihtsdotools.org/display/DOCRELFMT/typeId+\(field\) "Reference term: typeId \(field\)")| [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\) "Reference term: SCTID \(data type\)")| Identifies the [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept "Glossary link: concept") that represent the defining attribute (or relationship type) represented by this [relationship](https://confluence.ihtsdotools.org/display/DOCGLOSS/relationship "Glossary link: relationship") version.That is the [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept "Glossary link: concept") representing the value of the attribute represented by the [typeId](https://confluence.ihtsdotools.org/display/DOCRELFMT/typeId+\(field\) "Reference term: typeId \(field\)") column.Set to the [identifier](https://confluence.ihtsdotools.org/display/DOCGLOSS/identifier "Glossary link: identifier") of a [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept "Glossary link: concept"). The concept identified must be either [ 116680003 | Is a|](http://snomed.info/id/116680003 "116680003 | Is a |") or a subtype of [ 410662002 | Concept model attribute|](http://snomed.info/id/410662002 "410662002 | Concept model attribute |") . The concepts that can be used as in the typeId column are formally defined as follows: [ 116680003 |is a|](http://snomed.info/id/116680003 "116680003 | is a |") OR < [ 410662002 |concept model attribute|](http://snomed.info/id/410662002 "410662002 | concept model attribute |") Note that the attributes that can be applied to particular concepts are formally defined by the [SNOMED CT Machine Readable Concept Model](https://confluence.ihtsdotools.org/display/DOCMRCM/SNOMED+CT+Machine+Readable+Concept+Model).| NO| NO  
[characteristicTypeId](https://confluence.ihtsdotools.org/display/DOCRELFMT/characteristicTypeId+\(field\) "Reference term: characteristicTypeId \(field\)")| [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\) "Reference term: SCTID \(data type\)")| A [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept "Glossary link: concept") enumeration value that identifies the characteristic type of the [relationship](https://confluence.ihtsdotools.org/display/DOCGLOSS/relationship "Glossary link: relationship") version (i.e. whether the [relationship](https://confluence.ihtsdotools.org/display/DOCGLOSS/relationship "Glossary link: relationship") version is defining, qualifying, etc.) This field is set to a [descendant](https://confluence.ihtsdotools.org/display/DOCGLOSS/descendant "Glossary link: descendant") of [ 900000000000449001 | Characteristic type|](http://snomed.info/id/900000000000449001 "900000000000449001 | Characteristic type |") in the metadata [hierarchy](https://confluence.ihtsdotools.org/display/DOCGLOSS/hierarchy "Glossary link: hierarchy").| YES| NO  
[modifierId](https://confluence.ihtsdotools.org/display/DOCRELFMT/modifierId+\(field\) "Reference term: modifierId \(field\)")| [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\) "Reference term: SCTID \(data type\)")| A [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept "Glossary link: concept") enumeration value that identifies the type of [Description Logic](https://confluence.ihtsdotools.org/display/DOCGLOSS/Description+Logic "Glossary link: Description Logic") (DL) restriction (some, all, etc.). Set to a [child](https://confluence.ihtsdotools.org/display/DOCGLOSS/child "Glossary link: child") of  [ 900000000000450001 | Modifier|](http://snomed.info/id/900000000000450001 "900000000000450001 | Modifier |") in the metadata [hierarchy](https://confluence.ihtsdotools.org/display/DOCGLOSS/hierarchy "Glossary link: hierarchy").| YES| NO  
  
# Process

The table below provides a summary of the process to follow when modifying a relationship in an extension.

File Type| Process  
---|---  
**Stated Axiom**  
**  
**| Modifying a concept definition involves updating the defining properties of the concept, i.e. making changes to the axioms that represent necessary conditions for the meaning of the concept. Once the update has been performed, the concept is classified together with the SNOMED CT content it belongs to, and a new set of relationships are inferred.  
To prepare for publication, a new row representing the updated concept definition is added to the [OWL axiom reference set](https://confluence.ihtsdotools.org/display/DOCRELFMT/5.2.1.9+OWL+Expression+Reference+Set).  
The attributes of the reference set member representing the stated axiom are set as follows:

  * _id_ is set to the UUID of the reference set member representing the definition of the concept being updated.
  * _effectiveTime_ is set to the date the extension will be published
  *  _active_ is set to '1' to indicate that the new relationship will be active at the time of publication
  *  _moduleId_ is set to identify a module concept from the extension
  *  _referencedComponentId _is set to the identifier of the concept being updated 
  *  _owlExpression_ is set to the text of the OWL expression representing the updated defining properties of the new concept

  
**Relationship**  
  
|  Depending on the nature of the change made, updates to the inferred relationship file will be made to reflect the changes.   
This may involve:

  * Inactivating relationships that are no longer valid for the concept
    * see [5.4.2.3 Inactivate Concept in an Extension](https://confluence.ihtsdotools.org/display/WIPEXTPG/5.4.2.3+Inactivate+Concept+in+an+Extension?src=sidebar)
  * Adding new relationships that represent new defining relationships
    * see [5.4.4.1 Add Relationship in an Extension](https://confluence.ihtsdotools.org/display/WIPEXTPG/5.4.4.1+Add+Relationship+in+an+Extension?src=sidebar)
  * Updating existing relationships, when the change made only impacts mutable attributes for existing relationships, see above
    * in this case, a new row which represents a new version of the modified relationship is added to the relationship file.

  
The attributes of the new version of the relationship are set as follows:

  * _id_ is set to the relationshipId of the relationship being modified
  *  _effectiveTime_ is set to the date the extension will be published
  *  _active_ is set to '1' to indicate that the new version of the relationship will be active at the time of publication
  *  _moduleId_ is set to identify a module concept from the extension
  *  _sourceId_ is set to the same as the original version of the relationship
  *  _destinationId_ is set to the same as the original version of the relationship
  *  _relationshipGroup_ is set to the updated relationship group number (or the original number if no update is required)
  * _typeId_ is set to the same as the original version of the relationship
  *  _characteristicTypeId_ is set to the updated value (or the original value if no update is required)
  * _modifierId_ is set to the updated value (or the original value if no update is required)







<a href="https://docs.google.com/forms/d/e/1FAIpQLScTmbZIf0UEQwYDkY27EEWBkaiYkHSbR0_9DmFrMLXoQLyL7Q/viewform?usp=pp_url&entry.1767247133=Extension+Guide&entry.670899847=5.4.4.2%20Modify%20Relationship%20in%20an%20Extension" class="button primary">Provide Feedback</a>
